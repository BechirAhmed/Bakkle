{% extends "base.html" %}

{% block title %}Bakkle Conversation detail{% endblock %}

{% block content %}

{% if convo %}
  Details for Conversation: {{ convo.id }}
  <br/>Start Date: {{ convo.start_date }}
  <br/>Seller: {{ convo.item.seller.display_name }}
  <br/>&nbsp&nbsp&nbsp&nbspDeleted Conversation: {{ convo.deleted_seller }}
  <br/>Buyer: {{ convo.buyer.display_name }}
  <br/>&nbsp&nbsp&nbsp&nbspDeleted Conversation: {{ convo.deleted_buyer }}
  <br/>Total number of messages: {{ message_count }}
  <br/>Item:
  <br/>&nbsp&nbspID: {{convo.item.id}}
  <br/>&nbsp&nbspTitle: {{convo.item.title}}
  <br/>

  <br/>Messages: 
  {% if messages %}
    <ul>
      {% for message in messages %} 
         <li>{{ message.id }}:
         {% if message.buyer_seller_flag %}
          {{ convo.buyer.display_name }} 
         {% else %}
          {{ convo.item.seller.display_name }}
         {% endif %}
         {% if message.message != "" %}
         <br/>&nbsp&nbsp&nbsp&nbspMessage: {{ message.message }}
         {% endif %}
         {% if message.proposed_price != 0.00 %}
         <br/>&nbsp&nbsp&nbsp&nbspProposed Price: {{ message.proposed_price }}
         {% endif %}
         {% if message.url != "" %}
            <br/>&nbsp&nbsp&nbsp&nbspImage: <img src= {{ message.url }} />
         {% endif %}
         <br/>&nbsp&nbsp&nbsp&nbspDate Sent: {{ message.date_sent }}
         <br/>&nbsp&nbsp&nbsp&nbspView: {{ message.viewed}}
         <br/>&nbsp&nbsp&nbsp&nbspSeller Deleted: {{ message.deleted_seller }}
         <br/>&nbsp&nbsp&nbsp&nbspBuyer Deleted: {{ message.deleted_buyer }}





         </li>
      {% endfor %}
    </ul> 
  {% else %}
   <p> This conversation has no messages </p>
  {% endif %}

{% else %}
  <p> No Conversation with that id </p>
{% endif %}

{% endblock %}
